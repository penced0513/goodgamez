extends layout.pug
append head
  script(src="/javascripts/game.js" type="module" )
block content
  div#game-page
    h1(id="game-title")=`${game.name}`
    div#game-container
      div
        img(src=`${game.img}`, alt="")
        div 
          h2= `Average Rating = ${averageReviewScore}`
        div 
          h2= `Genre: ${game.Genre.name}`
          if shelves
            form(action="/shelves/add" method="post")
              input(type="hidden" name="_csrf" value=csrfToken)
              input(type="hidden" name="gameId" value=`${game.id}`)
              select(id="shelf-selection" name="shelfId")
                each shelf in shelves
                  option(value=`${shelf.id}`)=`${shelf.name}`
              button(type="submit" id="addToShelfButton") Add To Shelf
      div
        p=`${game.description}`
      if locals.authenticated
        input(type="hidden" name="userId" value=`${locals.user.id}`, id="fetchUserId")
        div#user-review-box
      h2 Reviews
        container#reviews-container
    div#game-shelf-container
    if shelves
    div#game-genre-container
      ul
        each genre in genres
          li
            a(href=`/genres/${genre.id}`)= genre.name
